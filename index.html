<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prodiware</title>
    <!-- Favicon placeholders - replace with your own -->
    <link rel="icon" type="image/png" href="https://placehold.co/32x32">
    <link rel="apple-touch-icon" href="https://placehold.co/180x180">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            transition: background-color 0.3s ease;
        }

        .page-container {
            transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out;
        }

        /* Modal specific styles */
        .modal {
            display: none;
        }
        .modal.is-active {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Main Container -->
    <div id="app-container" class="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex flex-col h-[calc(100vh-2rem)] md:h-[calc(100vh-4rem)]">
        
        <!-- Taskbar -->
        <nav class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4 shadow-lg flex justify-between items-center z-10">
            <div class="flex items-center space-x-4">
                <a href="#" class="text-3xl font-bold tracking-tight text-white transition transform hover:scale-105 duration-300">Prodiware</a>
            </div>
            <div class="flex items-center space-x-4 md:space-x-6">
                <a href="#" class="nav-link flex items-center space-x-2 text-white hover:text-gray-200 transition-colors duration-300 group" data-page="home">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m0 0v-10a1 1 0 00-1-1h-3m-10 11v-10a1 1 0 011-1h3"></path></svg>
                    <span class="hidden md:inline">Home</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-2 text-white hover:text-gray-200 transition-colors duration-300 group" data-page="art-studio">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM2 17h4m8 0h4m-8-4h4m-8-4h4"></path></svg>
                    <span class="hidden md:inline">Art Studio</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-2 text-white hover:text-gray-200 transition-colors duration-300 group" data-page="prodiworld">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 100-18 9 9 0 000 18zM12 9a2 2 0 100-4 2 2 0 000 4zM12 16a2 2 0 100-4 2 2 0 000 4zM18 12a2 2 0 100-4 2 2 0 000 4zM6 12a2 2 0 100-4 2 2 0 000 4z"></path></svg>
                    <span class="hidden md:inline">ProdiWorld</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-2 text-white hover:text-gray-200 transition-colors duration-300 group" data-page="chatbot">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span class="hidden md:inline">Chatbot</span>
                </a>
                <a href="#" class="nav-link flex items-center space-x-2 text-white hover:text-gray-200 transition-colors duration-300 group" data-page="news">
                    <svg class="w-6 h-6 group-hover:scale-110 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20a2 2 0 01-2-2V6a2 2 0 012-2h2a2 2 0 012 2v12a2 2 0 01-2 2h-2zM3 20a2 2 0 01-2-2V6a2 2 0 012-2h2a2 2 0 012 2v12a2 2 0 01-2 2H3zM10 20a2 2 0 01-2-2V6a2 2 0 012-2h2a2 2 0 012 2v12a2 2 0 01-2 2h-2z"></path></svg>
                    <span class="hidden md:inline">News</span>
                </a>
            </div>
            
            <!-- Login/Logout button -->
            <button id="auth-button" class="bg-white text-blue-600 font-bold py-2 px-4 rounded-full shadow-lg hover:bg-gray-100 transition-colors duration-300 transform hover:scale-105">Login</button>
        </nav>

        <!-- Main Content Area -->
        <main id="content" class="flex-grow p-6 overflow-y-auto">
            <!-- Page containers -->
            <section id="home-page" class="page-container flex flex-col items-center justify-center text-center p-8 bg-white rounded-3xl shadow-lg transform transition-transform duration-500 ease-in-out">
                <div class="space-y-4">
                    <h1 id="greeting-message" class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 animate-pulse">Hello guest!</h1>
                    <p class="text-lg text-gray-700 max-w-2xl mx-auto">Welcome to the Prodiware homepage. Use the navigation bar to explore our amazing creations!</p>
                </div>
            </section>

            <section id="art-studio-page" class="page-container hidden p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Art Studio</h2>
                <p class="text-lg text-gray-600">This is where your artistic journey begins! We are currently building this page. Please check back later.</p>
            </section>

            <section id="prodiworld-page" class="page-container hidden p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">ProdiWorld (MMO)</h2>
                <p class="text-lg text-gray-600">The world of ProdiWorld is a vast place waiting for you to explore! This page is a work in progress. Thank you for your patience.</p>
            </section>

            <section id="chatbot-page" class="page-container hidden p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Chatbot</h2>
                <p class="text-lg text-gray-600">Our intelligent chatbot is currently in training. Soon, it will be ready to assist you!</p>
            </section>

            <section id="news-page" class="page-container hidden p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-4">Latest News</h2>
                <p class="text-lg text-gray-600">Stay tuned for the latest updates and announcements from Prodiware!</p>
            </section>
            
        </main>
    </div>

    <!-- Login/Signup Modal -->
    <div id="auth-modal" class="modal fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl relative">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors duration-200">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <h2 id="auth-title" class="text-3xl font-extrabold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600">Login</h2>
            
            <form id="auth-form" class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email address</label>
                    <input type="email" id="email" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-full shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="you@example.com">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-full shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="••••••••">
                </div>
                <div id="auth-error" class="text-red-500 text-sm text-center font-medium hidden"></div>

                <button type="submit" id="auth-submit-btn" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-full shadow-lg text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition transform hover:scale-105">Login</button>
                
                <div class="mt-4 text-center">
                    <button type="button" id="toggle-auth-btn" class="text-sm font-medium text-blue-600 hover:underline">Don't have an account? Sign Up</button>
                </div>
                
                <div class="relative flex py-5 items-center">
                    <div class="flex-grow border-t border-gray-300"></div>
                    <span class="flex-shrink mx-4 text-gray-400">Or</span>
                    <div class="flex-grow border-t border-gray-300"></div>
                </div>

                <button type="button" id="google-login-btn" class="w-full flex justify-center items-center space-x-2 py-3 px-4 border border-gray-300 rounded-full shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition transform hover:scale-105">
                    <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.0001 2.99999C15.068 2.99999 17.6534 4.01529 19.5786 5.89781L16.2991 9.1764C15.2818 8.2434 13.7918 7.67498 12.0001 7.67498C9.52227 7.67498 7.46083 9.35824 6.7423 11.6667H2.86316V14.6667H6.7423C7.46083 16.9751 9.52227 18.6584 12.0001 18.6584C13.8821 18.6584 15.3721 17.9892 16.3894 17.0667L19.6738 20.3584C17.6186 22.2584 15.0287 23.3334 12.0001 23.3334C6.46738 23.3334 1.8335 18.868 1.8335 13.3334C1.8335 7.79878 6.46738 3.33331 12.0001 3.33331V2.99999ZM22.5 13.3334H2.5" stroke="#4A5568" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Sign in with Google</span>
                </button>
            </form>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>

    <script type="module">
        // Firebase configuration from the user's prompt
        const firebaseConfig = {
            apiKey: "AIzaSyDHJV0vPmqRip2sgvowY-0NBzolewBo7hs",
            authDomain: "prodipaint.firebaseapp.com",
            projectId: "prodipaint",
            storageBucket: "prodipaint.firebasestorage.app",
            messagingSenderId: "998749701351",
            appId: "1:998749701351:web:ec0bf1918b94b7081f8e42",
            measurementId: "G-QSPKEK9DC9",
            webClientId: "998749701351-ihqbv9597r3dar1366k26qoqdcvc9fs5.apps.googleusercontent.com"
        };

        // Import necessary Firebase functions
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { 
            getAuth, 
            GoogleAuthProvider, 
            signInWithPopup, 
            signOut, 
            onAuthStateChanged,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword
        } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
        import { getFirestore, doc, setDoc } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        // --- DOM Elements ---
        const authButton = document.getElementById('auth-button');
        const greetingMessage = document.getElementById('greeting-message');
        const navLinks = document.querySelectorAll('.nav-link');
        const pageContainers = document.querySelectorAll('.page-container');
        const homePage = document.getElementById('home-page');
        const authModal = document.getElementById('auth-modal');
        const closeBtn = document.getElementById('close-modal-btn');
        const authTitle = document.getElementById('auth-title');
        const authForm = document.getElementById('auth-form');
        const emailInput = document.getElementById('email');
        const passwordInput = document.getElementById('password');
        const authSubmitBtn = document.getElementById('auth-submit-btn');
        const toggleAuthBtn = document.getElementById('toggle-auth-btn');
        const googleLoginBtn = document.getElementById('google-login-btn');
        const authError = document.getElementById('auth-error');

        // --- State ---
        let isSigningUp = false;

        // --- Functions ---

        /**
         * Renders the specified page and hides all others.
         * @param {string} pageId The ID of the page to show.
         */
        const showPage = (pageId) => {
            pageContainers.forEach(page => {
                if (page.id === pageId) {
                    page.classList.remove('hidden');
                    page.style.transform = 'translateY(0)';
                    page.style.opacity = '1';
                } else {
                    page.classList.add('hidden');
                    page.style.transform = 'translateY(20px)';
                    page.style.opacity = '0';
                }
            });
            // Add a small animation to the home page content
            if (pageId === 'home-page') {
                homePage.style.transform = 'translateY(0)';
                homePage.style.opacity = '1';
            }
        };

        /**
         * Shows the login/signup modal.
         */
        const showAuthModal = () => {
            authModal.classList.add('is-active');
        };

        /**
         * Hides the login/signup modal.
         */
        const hideAuthModal = () => {
            authModal.classList.remove('is-active');
            authError.classList.add('hidden');
            authForm.reset(); // Reset form fields
        };

        /**
         * Toggles between login and signup forms.
         */
        const toggleAuthMode = () => {
            isSigningUp = !isSigningUp;
            authTitle.textContent = isSigningUp ? 'Sign Up' : 'Login';
            authSubmitBtn.textContent = isSigningUp ? 'Sign Up' : 'Login';
            toggleAuthBtn.textContent = isSigningUp ? 'Already have an account? Login' : 'Don\'t have an account? Sign Up';
            authError.classList.add('hidden');
        };

        /**
         * Handles user login with Google.
         */
        const googleLogin = async () => {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
                hideAuthModal();
            } catch (error) {
                console.error("Google Login failed:", error);
                authError.textContent = `Google login failed: ${error.message}`;
                authError.classList.remove('hidden');
            }
        };

        /**
         * Handles user logout.
         */
        const logout = async () => {
            try {
                await signOut(auth);
            } catch (error) {
                console.error("Logout failed:", error);
            }
        };

        /**
         * Listens for authentication state changes and updates the UI.
         */
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // User is logged in
                const displayName = user.displayName || user.email.split('@')[0];
                greetingMessage.textContent = `Hello, ${displayName}!`;
                authButton.textContent = 'Logout';
                authButton.onclick = logout;
                hideAuthModal();

                // Save user data to Firestore on first login
                const userRef = doc(db, 'users', user.uid);
                await setDoc(userRef, {
                    uid: user.uid,
                    displayName: user.displayName,
                    email: user.email,
                    photoURL: user.photoURL,
                    lastLogin: new Date()
                }, { merge: true });

            } else {
                // User is logged out
                greetingMessage.textContent = 'Hello guest!';
                authButton.textContent = 'Login';
                authButton.onclick = showAuthModal;
            }
            // Always show the home page on auth state change
            showPage('home-page');
        });

        // --- Event Listeners ---

        // Handle navigation clicks
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.dataset.page + '-page';
                showPage(pageId);
            });
        });

        // Close modal button
        closeBtn.addEventListener('click', hideAuthModal);

        // Toggle between login and signup
        toggleAuthBtn.addEventListener('click', toggleAuthMode);

        // Google login button
        googleLoginBtn.addEventListener('click', googleLogin);

        // Email/Password form submission
        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = emailInput.value;
            const password = passwordInput.value;
            
            if (!email || !password) {
                authError.textContent = 'Please enter an email and password.';
                authError.classList.remove('hidden');
                return;
            }
            
            authError.classList.add('hidden');
            
            try {
                if (isSigningUp) {
                    await createUserWithEmailAndPassword(auth, email, password);
                } else {
                    await signInWithEmailAndPassword(auth, email, password);
                }
                // Auth state change listener will handle UI update
            } catch (error) {
                console.error("Authentication failed:", error);
                let errorMessage = 'An unknown error occurred.';
                switch (error.code) {
                    case 'auth/user-not-found':
                    case 'auth/wrong-password':
                    case 'auth/invalid-credential':
                        errorMessage = 'Invalid email or password.';
                        break;
                    case 'auth/email-already-in-use':
                        errorMessage = 'Email already in use. Please login or use a different email.';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'Password must be at least 6 characters long.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Invalid email address.';
                        break;
                    default:
                        errorMessage = `Error: ${error.message}`;
                }
                authError.textContent = errorMessage;
                authError.classList.remove('hidden');
            }
        });

    </script>
</body>
</html>
